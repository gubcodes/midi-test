<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>midi test</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <p id='device-name'></p>
  <!-- <button onclick="play(1, 60)">C3 on</button>
  <button onclick="play(0, 60)">C3 off</button> -->
  <h4>keyboard</h4>
  <div id="keyboard"></div>
  <br>
  <div class="divider"></div>
  <h4>sequencer</h4>
  <label for="bpm">bpm</label>
  <input id="bpm" type="number" name="bpm" value="120">
  <!-- can add min and max attributes to bpm above -->
  <br>
  <br>
  <div id="sequencer"></div>
  <button onClick="sequencerPlay()">play</button>
  <button onClick="sequencerStop()">stop</button>
  <button onClick="saveSession()">save</button>
  <button onClick="loadSession()">load</button>
  <span id="save-message"></span>
  <br><br>
  notes:
  <ul>
    <li>
      keyboard and sequencer operate independently
    </li>
    <li>
      each box checked should play the selected frequency for 125% of the length of the step, unless the immediate next step interrupts it
    </li>
    <li>
      speed set to 120bpm (hopefully) with each step being a 16th note
    </li>
    <li>
      velocity set to 99 (out of 128)
    </li>
    <li>
      "save" stores a snapshot of your current session in your browser's local storage for you to access later. saving again overwrites the snapshot (you can only have one session saved at a time). deleting browser data will erase any sessions you have saved.
    </li>
    <li>
      "load" will load any session you have saved.
    </li>
    <li>
      you can start multiple threads on sequencer for potential delay chaos - works best with some empty steps, each thread will be fighting the others
    </li>
    <li>
      BUG: first play of step 1 doesn't shut off that frequency until 2nd play through
    </li>
  </ul>
  
  <script type="text/javascript" src="midi.js"></script>
  <script type="text/javascript" src="keyboard.js"></script>
  <script type="text/javascript" src="bpm.js"></script>
  <script type="text/javascript" src="sequencer.js"></script>
  <script type="text/javascript" src="local-storage.js"></script>
</body>
</html>